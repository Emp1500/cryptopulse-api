<div>
  <!-- Header -->
  <header class="d-flex justify-content-between align-items-center py-3 mb-4 border-bottom" style="background-color: #161b22;">
    <a href="/" class="d-flex align-items-center text-dark text-decoration-none" style="gap: 0.5rem;">
        <span class="stylish-heading fw-bold" style="font-size: 2.2rem; font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif; letter-spacing: 1px; color: white;">
            <span style="color: rgb(244, 126, 15); font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif; letter-spacing: 2px;">Crypto</span>
            <span style="color: grey;">Pulse</span>
        </span>
        <img src="/images/cryptologo1.png" alt="Cryptocurrency exchange logo" style="width: 70px; height: 50px; margin-left: 8px; vertical-align: middle;" />
    </a>
    <ul class="nav nav-pills me-3 align-items-center">
        <li class="nav-item">
            <a href="/" class="nav-link btn btn-warning rounded-pill text-dark px-3" style="background-color: #fd7e14; border-color: #fd7e14; color: #212529;">Home</a>
        </li>
        <li class="nav-item"><a href="/markets" class="nav-link">Markets</a></li>
        <% if (typeof user !== 'undefined' && user) { %>
            <li class="nav-item"><a href="/portfolio" class="nav-link">Portfolio</a></li>
        <% } %>
        <li class="nav-item"><a href="/news" class="nav-link">News</a></li>
        <li class="nav-item"><a href="/about" class="nav-link">About</a></li>

        <% if (typeof user !== 'undefined' && user) { %>
            <!-- Logged In: Show user dropdown -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle user-dropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <span class="user-avatar"><%= user.name.charAt(0).toUpperCase() %></span>
                    <span class="user-name"><%= user.name %></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark">
                    <li><a class="dropdown-item" href="/portfolio">My Portfolio</a></li>
                    <li><a class="dropdown-item" href="/portfolio/watchlist">Watchlist</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
                </ul>
            </li>
        <% } else { %>
            <!-- Logged Out: Show Login button -->
            <li class="nav-item ms-2">
                <a href="/auth/login" class="nav-link btn btn-outline-light rounded-pill px-3">Login</a>
            </li>
        <% } %>
    </ul>
</header>
</div>

<style>
    .user-dropdown {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 5px 12px;
        background: rgba(253, 126, 20, 0.1);
        border-radius: 25px;
        border: 1px solid rgba(253, 126, 20, 0.3);
    }

    .user-dropdown:hover {
        background: rgba(253, 126, 20, 0.2);
    }

    .user-avatar {
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, #fd7e14 0%, #e55a00 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.9rem;
        color: white;
    }

    .user-name {
        color: #c9d1d9;
        font-weight: 500;
    }

    .dropdown-menu-dark {
        background: #1e2a3a;
        border: 1px solid #30363d;
    }

    .dropdown-menu-dark .dropdown-item {
        color: #c9d1d9;
    }

    .dropdown-menu-dark .dropdown-item:hover {
        background: rgba(253, 126, 20, 0.2);
        color: #fd7e14;
    }

    .dropdown-divider {
        border-color: #30363d;
    }

    .btn-outline-light {
        border-color: #fd7e14;
        color: #fd7e14;
    }

    .btn-outline-light:hover {
        background: #fd7e14;
        border-color: #fd7e14;
        color: #fff;
    }
</style>
